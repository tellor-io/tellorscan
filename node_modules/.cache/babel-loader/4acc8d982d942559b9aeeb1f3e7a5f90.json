{"ast":null,"code":"import Web3 from 'web3';\nimport Web3Modal from 'web3modal';\nimport WalletConnectProvider from '@walletconnect/web3-provider';\nimport { getChainData } from './chains';\n\nconst getChainIdName = chainId => {\n  switch (chainId) {\n    case 1:\n      return 'Mainnet';\n\n    case 3:\n      return 'Ropsten';\n\n    case 4:\n      return 'Rinkeby';\n\n    case 5:\n      return 'Goerli';\n\n    case 42:\n      return 'Kovan';\n\n    case 4447:\n      return 'Ganache';\n\n    default:\n      return 'Unknown';\n  }\n};\n\nexport const providerOptions = {\n  walletconnect: {\n    package: WalletConnectProvider,\n    // required\n    options: {\n      infuraId: process.env.REACT_APP_INFURA_URI.split('/').pop()\n    }\n  }\n};\nexport const w3connect = async web3Modal => {\n  const provider = await web3Modal.connect();\n  const web3 = new Web3(provider);\n  const injectedChainId = await web3.eth.getChainId();\n\n  if (injectedChainId !== +process.env.REACT_APP_CHAIN_ID) {\n    alert(`Please switch Web3 to the correct network and try signing in again. Detected network: ${getChainData(injectedChainId).network}, Required network: ${getChainData(+process.env.REACT_APP_CHAIN_ID).network}`);\n    throw new Error(`Injected web3 chainId: ${injectedChainId}, config: ${+process.env.REACT_APP_CHAIN_ID}`);\n  } // console.log(web3Modal, web3, provider);\n\n\n  return {\n    web3Modal,\n    web3,\n    provider\n  };\n};\nexport const signInWithWeb3 = async () => {\n  // const infuraId = process.env.INFURA_URI.split('/').pop();\n  console.log('+process.env.REACT_APP_CHAIN_ID: ', +process.env.REACT_APP_CHAIN_ID);\n  const web3Modal = new Web3Modal({\n    network: getChainData(+process.env.REACT_APP_CHAIN_ID).network,\n    // optional\n    providerOptions // required\n\n  });\n  console.log('web3Modal: ', web3Modal);\n  const provider = await web3Modal.connect();\n  console.log('provider: ', provider);\n  const web3 = new Web3(provider);\n  console.log('web3: ', web3);\n  const injectedChainId = await web3.eth.getChainId();\n  console.log('injectedChainId: ', injectedChainId);\n  const [account] = await web3.eth.getAccounts();\n  console.log('account: ', account);\n\n  if (injectedChainId !== +process.env.REACT_APP_CHAIN_ID) {\n    alert(`Please switch Web3 to the correct network and try signing in again. Detected network: ${getChainIdName(injectedChainId)}, Required network: ${getChainIdName(+process.env.REACT_APP_CHAIN_ID)}`);\n    throw new Error(`Injected web3 chainId: ${injectedChainId}, config: ${+process.env.REACT_APP_CHAIN_ID}`);\n  }\n\n  return {\n    user: createWeb3User(account),\n    provider\n  };\n};\nexport const createWeb3User = accountAddress => {\n  return {\n    type: 'web3',\n    attributes: {\n      'custom:account_address': accountAddress\n    },\n    username: accountAddress\n  };\n};","map":{"version":3,"sources":["/home/samkuhlmann/Documents/ody/tellor/tellorDisputeCenter/src/utils/auth.js"],"names":["Web3","Web3Modal","WalletConnectProvider","getChainData","getChainIdName","chainId","providerOptions","walletconnect","package","options","infuraId","process","env","REACT_APP_INFURA_URI","split","pop","w3connect","web3Modal","provider","connect","web3","injectedChainId","eth","getChainId","REACT_APP_CHAIN_ID","alert","network","Error","signInWithWeb3","console","log","account","getAccounts","user","createWeb3User","accountAddress","type","attributes","username"],"mappings":"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","sourcesContent":["import Web3 from 'web3';\nimport Web3Modal from 'web3modal';\nimport WalletConnectProvider from '@walletconnect/web3-provider';\n\nimport { getChainData } from './chains';\n\nconst getChainIdName = (chainId) => {\n  switch (chainId) {\n    case 1:\n      return 'Mainnet';\n    case 3:\n      return 'Ropsten';\n    case 4:\n      return 'Rinkeby';\n    case 5:\n      return 'Goerli';\n    case 42:\n      return 'Kovan';\n    case 4447:\n      return 'Ganache';\n    default:\n      return 'Unknown';\n  }\n};\n\nexport const providerOptions = {\n  walletconnect: {\n    package: WalletConnectProvider, // required\n    options: {\n      infuraId: process.env.REACT_APP_INFURA_URI.split('/').pop(),\n    },\n  },\n};\n\nexport const w3connect = async (web3Modal) => {\n  const provider = await web3Modal.connect();\n\n  const web3 = new Web3(provider);\n\n  const injectedChainId = await web3.eth.getChainId();\n\n  if (injectedChainId !== +process.env.REACT_APP_CHAIN_ID) {\n    alert(\n      `Please switch Web3 to the correct network and try signing in again. Detected network: ${\n        getChainData(injectedChainId).network\n      }, Required network: ${\n        getChainData(+process.env.REACT_APP_CHAIN_ID).network\n      }`,\n    );\n    throw new Error(\n      `Injected web3 chainId: ${injectedChainId}, config: ${+process.env\n        .REACT_APP_CHAIN_ID}`,\n    );\n  }\n  // console.log(web3Modal, web3, provider);\n\n  return { web3Modal, web3, provider };\n};\n\nexport const signInWithWeb3 = async () => {\n  // const infuraId = process.env.INFURA_URI.split('/').pop();\n\n  console.log(\n    '+process.env.REACT_APP_CHAIN_ID: ',\n    +process.env.REACT_APP_CHAIN_ID,\n  );\n  const web3Modal = new Web3Modal({\n    network: getChainData(+process.env.REACT_APP_CHAIN_ID).network, // optional\n    providerOptions, // required\n  });\n  console.log('web3Modal: ', web3Modal);\n\n  const provider = await web3Modal.connect();\n  console.log('provider: ', provider);\n\n  const web3 = new Web3(provider);\n  console.log('web3: ', web3);\n\n  const injectedChainId = await web3.eth.getChainId();\n  console.log('injectedChainId: ', injectedChainId);\n\n  const [account] = await web3.eth.getAccounts();\n  console.log('account: ', account);\n\n  if (injectedChainId !== +process.env.REACT_APP_CHAIN_ID) {\n    alert(\n      `Please switch Web3 to the correct network and try signing in again. Detected network: ${getChainIdName(\n        injectedChainId,\n      )}, Required network: ${getChainIdName(+process.env.REACT_APP_CHAIN_ID)}`,\n    );\n    throw new Error(\n      `Injected web3 chainId: ${injectedChainId}, config: ${+process.env\n        .REACT_APP_CHAIN_ID}`,\n    );\n  }\n\n  return { user: createWeb3User(account), provider };\n};\n\nexport const createWeb3User = (accountAddress) => {\n  return {\n    type: 'web3',\n    attributes: { 'custom:account_address': accountAddress },\n    username: accountAddress,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}